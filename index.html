<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Slope Calculator</title>
  <meta name="theme-color" content="#111827">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="app">
    <div class="card">
      <header>
        <h1>Slope Calculator</h1>
        <span class="pill">Mobile-first</span>
      </header>

      <div class="hint">
        Enter <b>any 3</b> values (Bottom Elev, Top Elev, Distance, Slope %) and I’ll solve the 4th.
      </div>

      <div class="solver">
        <div class="grid">
          <label class="fld">Bottom Elev
            <input id="eb" type="text" inputmode="text" autocomplete="off" autocapitalize="off" autocorrect="off"
              spellcheck="false" placeholder="e.g. 692.500" pattern="^-?\\d*\\.?\\d*$">
          </label>
          <label class="fld">Top Elev
            <input id="et" type="text" inputmode="text" autocomplete="off" autocapitalize="off" autocorrect="off"
              spellcheck="false" placeholder="e.g. 695.125" pattern="^-?\\d*\\.?\\d*$">
          </label>
          <label class="fld">Distance
            <input id="d" type="text" inputmode="text" autocomplete="off" autocapitalize="off" autocorrect="off"
              spellcheck="false" placeholder="meters" pattern="^-?\\d*\\.?\\d*$">
          </label>
          <label class="fld">Slope (%)
            <input id="s" type="text" inputmode="text" autocomplete="off" autocapitalize="off" autocorrect="off"
              spellcheck="false" placeholder="rise/run × 100" pattern="^-?\\d*\\.?\\d*$">
          </label>
        </div>

        <div class="actions">
          <button id="btn-clear" type="button">Clear all</button>
        </div>

        <div class="solve-row">
          <span id="solveMsg">Enter any 3 values; I’ll solve the 4th.</span>
        </div>
      </div>
    </div>
  </div>

  <script>const $=(sel)=>document.querySelector(sel);const eb=$('#eb'),et=$('#et'),d=$('#d'),s=$('#s');const solveMsg=$('#solveMsg');[eb,et,d,s].forEach(inp=>{inp.addEventListener('input',()=>{const cleaned=inp.value.replace(/[^0-9.\-]/g,'');if(cleaned!==inp.value)inp.value=cleaned;solve()});inp.addEventListener('keydown',(e)=>{if(e.key==='Enter'){e.preventDefault();solve()}})});$('#btn-clear').addEventListener('click',()=>{[eb,et,d,s].forEach(i=>i.value='');solve();eb.focus()});function num(v){if(v==null||v.trim()==='')return null;const n=Number(v);return Number.isFinite(n)?n:null}
  function setRounded(inp,val){const r=Math.round((val+Number.EPSILON)*1000)/1000;inp.value=(Object.is(r,-0)?0:r).toString()}
  function solve(){const Eb=num(eb.value),Et=num(et.value),D=num(d.value),S=num(s.value);const present=[Eb!=null,Et!=null,D!=null,S!=null].filter(Boolean).length;if(present<3){solveMsg.textContent='Enter any 3 values; I’ll solve the 4th.';return}
  if(Eb==null&&Et!=null&&D!=null&&S!=null){setRounded(eb,Et-D*(S/100));solveMsg.textContent='Solved bottom elevation.';return}
  if(Et==null&&Eb!=null&&D!=null&&S!=null){setRounded(et,Eb+D*(S/100));solveMsg.textContent='Solved top elevation.';return}
  if(D==null&&Eb!=null&&Et!=null&&S!=null){if(S===0){solveMsg.textContent='Distance undefined when slope is 0% and elevations differ.';return}
  setRounded(d,(Et-Eb)/(S/100));solveMsg.textContent='Solved distance.';return}
  if(S==null&&Eb!=null&&Et!=null&&D!=null){if(D===0){solveMsg.textContent='Slope undefined when distance is 0.';return}
  setRounded(s,((Et-Eb)/D)*100);solveMsg.textContent='Solved slope (%).';return}
  if(Eb!=null&&Et!=null&&D!=null&&D!==0){setRounded(s,((Et-Eb)/D)*100);solveMsg.textContent='Recomputed slope (%).'}}</script>
</body>

</html>